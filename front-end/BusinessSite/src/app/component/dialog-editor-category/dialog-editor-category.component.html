<h1 mat-dialog-title> Category </h1>

<mat-dialog-content>
  <div *ngIf="category$ | async as category; else loading">
    <form>
      <div fxLayout="column" fxLayoutAlign="space-around center">
        <div *ngIf="category.isEverything" class="warning">
          This is a technical category for filtering by everything. You can not
          delete it.
        </div>
        <mat-form-field>
          <input [disabled]="disableInput$ | async" matInput [(ngModel)]="category.code" name="code" placeholder="code"/>
        </mat-form-field>
        <mat-form-field>
          <input [disabled]="disableInput$ | async" matInput [(ngModel)]="category.displayName" name="displayName" placeholder="Display name"/>
        </mat-form-field>
      </div>
    </form>
    <br />
  </div>

  <div *ngIf="message$ | async as msg">
    <app-message [message]="msg"></app-message>
  </div>

  <div *ngIf="category$ | async as category">
    <div class="actions">
      <button *ngIf="!category.isEverything" [disabled]="disableInput$ | async" mat-button (click)="delete()">
        Delete
      </button>
      <div>
        <button [disabled]="disableInput$ | async" mat-button (click)="save()">
          Save
        </button>
        <button mat-button cdkFocusInitial (click)="close()">Close</button>
      </div>
    </div>
  </div>
</mat-dialog-content>
<br />

<ng-template #loading>
  <app-message [message]="loadingMessage"></app-message>
</ng-template>

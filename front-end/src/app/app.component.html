<app-header></app-header>

<mat-toolbar>
  <mat-toolbar-row fxLayout="row" fxLayoutAlign="center stretch" 
                   fxShow="true" fxHide.lt-md="true">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        {{textMessages.MenuHome}}
      </a>
      <a routerLink="/projects/" routerLinkActive="active">
        {{textMessages.MenuProjects}}
      </a>
      
      <ng-container *ngIf="authGuard.validating$ | async; else adminLink">
        <img class="loading" src="\assets\images\revolver.png" /> 
      </ng-container>
      <ng-template #adminLink>
        <ng-container *ngIf="authGuard.isLoggedIn$ | async; else login">
          <a routerLink="/admin/" routerLinkActive="active">{{textMessages.MenuAdmin}}</a>
        </ng-container>
        <ng-template #login>
          <a routerLink="/login/" routerLinkActive="active">{{textMessages.MenuLogin}}</a>
        </ng-template>
      </ng-template>
  </mat-toolbar-row>

  <mat-toolbar-row class="mobile"  fxLayout="row" fxLayoutAlign="center stretch"
                   fxShow="true" fxHide.gt-sm="true" >
        <a (click)="drawer.toggle()"> {{textMessages.Menu}} </a>
  </mat-toolbar-row>
</mat-toolbar>

<mat-drawer-container autosize>
  <mat-drawer #drawer mode="over" fxHide.gt-sm="true">
    <div fxLayout="column" fxLayoutAlign="none">
      <a routerLink="/"> {{textMessages.MenuHome}} </a>
      <a routerLink="/projects/"> {{textMessages.MenuProjects}}  </a>

      <ng-container *ngIf="authGuard.isLoggedIn$ | async; else sideLogin">
        <a routerLink="/admin/" routerLinkActive="active">{{textMessages.MenuAdmin}}</a>
      </ng-container>
      <ng-template #sideLogin>
        <a routerLink="/login/" routerLinkActive="active">{{textMessages.MenuLogin}}</a>
      </ng-template>

    </div>
  </mat-drawer>
  
  <div class="container" fxLayout="column">
    <div class="admin-menu" fxFlex="60"
        fxLayout="row" fxLayoutAlign="center center"
        *ngIf="router.isActive('/admin', false) && (authGuard.isLoggedIn$ | async)">

     <a *ngIf="authGuard.canSee('/admin')"
        [routerLink]="['/admin']"
        [routerLinkActiveOptions]="{ exact: true }"
        routerLinkActive="active">{{textMessages.MenuAdmin}}</a>

      <a *ngIf="authGuard.canSee('/admin/editor/introduction')"
        [routerLink]="['/admin/editor/introduction']"
        routerLinkActive="active">{{textMessages.MenuIntroduction}}</a>

      <a *ngIf="authGuard.canSee('/admin/editor/projects')"
         [routerLink]="['/admin/editor/projects']"
         routerLinkActive="active">{{textMessages.MenuProjects}} </a>
      
      <a *ngIf="authGuard.canSee('/admin/editor/categories/')" 
         [routerLink]="['/admin/editor/categories']"
         routerLinkActive="active">{{textMessages.MenuCategories}}</a>

      <a *ngIf="authGuard.canSee('/admin/editor/accounts')"
         [routerLink]="['/admin/editor/accounts']"
         routerLinkActive="active">{{textMessages.MenuAccounts}}</a>
    </div>

    <div class="content" fxFlex>
      <router-outlet></router-outlet>
    </div>
  </div>
</mat-drawer-container>

<app-footer></app-footer>
